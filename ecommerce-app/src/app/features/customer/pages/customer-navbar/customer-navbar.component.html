<div class="navbar-spacer" [style.height.px]="navbarHeight"></div>

<nav class="customer-navbar" [class.hidden]="isNavbarHidden">
  <div class="container">
    <div class="navbar-inner">
      <div class="logo">
        <a routerLink="/customer/home">AzuL</a>
      </div>

      <div class="categories-wrapper">
        <button class="categories-btn" (click)="toggleCategories()">Categories ▾</button>
        <ul class="categories-menu" [class.open]="categoriesOpen">
          <li *ngFor="let cat of categories">
            <a [routerLink]="['/customer/category', cat.categoryId, cat.name]" (click)="categoriesOpen = false">{{ cat.name }}</a>
          </li>
          <li *ngIf="categories.length === 0"><a (click)="categoriesOpen = false">No categories</a></li>
        </ul>
      </div>

      <form [formGroup]="searchForm" class="search-box" (ngSubmit)="onSearch()">
        <input formControlName="query" type="text" placeholder="Search products..." />
        <button type="submit" aria-label="Search">🔍</button>
      </form>

      <a routerLink="/customer/favorites" class="icon-link">❤️ Favorites</a>
      <a routerLink="/customer/cart" class="icon-link">🛒 Cart</a>

      <div class="profile-dropdown">
        <button class="profile-btn" (click)="toggleProfileMenu()">👤 Account ▾</button>
        <ul class="dropdown-menu" [class.open]="profileMenuOpen">
          <li *ngFor="let item of profileMenu">
            <a [routerLink]="item.path" (click)="profileMenuOpen = false">{{ item.label }}</a>
          </li>
          <li *ngIf="profileMenu.length > 0" class="divider"></li>
          <li>
            <a href="#" (click)="onLogout(); profileMenuOpen = false; $event.preventDefault()">Logout</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>